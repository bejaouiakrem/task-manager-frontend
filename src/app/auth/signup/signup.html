

<main class="container signup-bg py-4 d-flex align-items-center justify-content-center min-vh-100">
  <div class="col-12 col-md-8 col-lg-6 col-xl-5">
    <div class="card shadow-lg rounded-4 border-0">
      <div class="card-header bg-primary text-white rounded-top-4 py-4 text-center border-0">
        <img src="assets/images/task.gif" alt="Logo" width="56" height="56" class="mb-2 rounded-circle border border-3 border-white shadow-sm animate__animated animate__fadeInDown">
        <h1 class="h4 mb-0 mt-2">Create Your Account</h1>
      </div>

      <div class="card-body p-4 p-md-5">
        @if (errorMessage) {
          <div class="alert alert-danger mb-4" role="alert">
            {{ errorMessage }}
          </div>
        }

  <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" class="needs-validation" novalidate autocomplete="off">
          <!-- Name Field -->
          <div class="mb-3">
            <label for="name" class="form-label">Full Name</label>
       <input type="text" 
         id="name"
         class="form-control form-control-lg shadow-sm" 
         formControlName="name"
         placeholder="John Doe"
         [class.is-invalid]="name.invalid && (name.dirty || name.touched)">
            
            @if (name.invalid && (name.dirty || name.touched)) {
              <div class="invalid-feedback">
                @if (name.errors?.['required']) { Name is required }
                @if (name.errors?.['minlength']) { Minimum 3 characters }
                @if (name.errors?.['maxlength']) { Maximum 50 characters }
              </div>
            }
          </div>

          <!-- Email Field -->
          <div class="mb-3">
            <label for="email" class="form-label">Email Address</label>
       <input type="email" 
         id="email"
         class="form-control form-control-lg shadow-sm" 
         formControlName="email"
         placeholder="your.email@example.com"
         [class.is-invalid]="email.invalid && (email.dirty || email.touched)">
            
            @if (email.invalid && (email.dirty || email.touched)) {
              <div class="invalid-feedback">
                @if (email.errors?.['required']) { Email is required }
                @if (email.errors?.['email']) { Invalid email format }
                @if (email.errors?.['maxlength']) { Maximum 100 characters }
              </div>
            }
          </div>

          <!-- Password Field -->
          <div class="mb-3">
            <label for="password" class="form-label">Password</label>
       <input type="password" 
         id="password"
         class="form-control form-control-lg shadow-sm" 
         formControlName="password"
         placeholder="••••••••"
         [class.is-invalid]="password.invalid && (password.dirty || password.touched)">
            
            <div class="form-text">Must include uppercase, lowercase, and number</div>
            
            @if (password.invalid && (password.dirty || password.touched)) {
              <div class="invalid-feedback">
                @if (password.errors?.['required']) { Password is required }
                @if (password.errors?.['minlength']) { Minimum 8 characters }
                @if (password.errors?.['pattern']) { Needs uppercase, lowercase, and number }
              </div>
            }
          </div>

          <!-- Confirm Password -->
          <div class="mb-4">
            <label for="confirmPassword" class="form-label">Confirm Password</label>
       <input type="password" 
         id="confirmPassword"
         class="form-control form-control-lg shadow-sm" 
         formControlName="confirmPassword"
         placeholder="••••••••"
         [class.is-invalid]="(confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched)) || !passwordsMatch">
            
            @if (!passwordsMatch && confirmPassword.valid) {
              <div class="invalid-feedback d-block">
                Passwords do not match
              </div>
            }
          </div>

          <!-- Terms Agreement -->
          <div class="mb-4 form-check">
            <input type="checkbox" 
                   id="agreeTerms" 
                   class="form-check-input accent-primary" 
                   formControlName="agreeTerms">
            <label class="form-check-label" for="agreeTerms">
              I agree to the <a href="#" class="text-decoration-none fw-semibold">Terms of Service</a>
            </label>
          </div>

          <!-- Submit Button -->
          <button type="submit" 
                  class="btn btn-primary btn-lg w-100 py-3 mb-3 shadow-sm gradient-btn position-relative overflow-hidden"
                  [disabled]="isLoading">
            @if (isLoading) {
              <span class="spinner-border spinner-border-sm me-2" aria-hidden="true"></span>
              Creating Account...
            } @else {
              <span class="fw-semibold">Create Account</span>
            }
          </button>

          <div class="text-center mt-3">
            <p class="mb-0">Already have an account? 
              <a routerLink="/login" class="text-decoration-none fw-semibold">Sign In</a>
            </p>
          </div>
        </form>
      </div>
    </div>
  </div>
</main>